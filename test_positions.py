# %%
from carbon.common import Decimal

# %% [markdown]
# #### List of test strategies
# #### For simplicity, lets refer to only the token_2: usdc orders.
# #### Most sets will have 10 positions with a sum of 10000 total liquidity
# #### Each set of positions should have 1000, 5000, 9000 run through
# #### Set-ups:
#     - 0 - Overlapping positions (all equivalent) that have equal range and start price - equal liquidity per position
#     - 1 - Overlapping positions that all begin at a different price - sliding window - equal liquidity per position
#     - 2 - Nestled positions with the next order price range inside the previous - equal liquidity per position
#     - 3 - 0 but with liquidity distribution 100x in one position
#     - 4 - 1 but with liquidity distribution 100x in one position
#     - 5 - 2 but with liquidity distribution 100x in one position
#     - 6 - Same p_a but with decreasing p_b (hence increasing S and n)  - equal liquidity per position

# %%
## Equal positions should be distributed evenly

input_dictionary_0 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
}


# %%
## Sliding window 

input_dictionary_1 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2790.000000000000000'),
    'token_2_p_b' :   Decimal('2690.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2780.000000000000000'),
    'token_2_p_b' :   Decimal('2680.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2770.000000000000000'),
    'token_2_p_b' :   Decimal('2670.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2760.000000000000000'),
    'token_2_p_b' :   Decimal('2660.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2750.000000000000000'),
    'token_2_p_b' :   Decimal('2650.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2740.000000000000000'),
    'token_2_p_b' :   Decimal('2640.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2730.000000000000000'),
    'token_2_p_b' :   Decimal('2630.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2720.000000000000000'),
    'token_2_p_b' :   Decimal('2620.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2710.000000000000000'),
    'token_2_p_b' :   Decimal('2610.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
}


# %%
## Nestled position

input_dictionary_2 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2795.000000000000000'),
    'token_2_p_b' :   Decimal('2705.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2790.000000000000000'),
    'token_2_p_b' :   Decimal('2710.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2785.000000000000000'),
    'token_2_p_b' :   Decimal('2715.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2780.000000000000000'),
    'token_2_p_b' :   Decimal('2720.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2775.000000000000000'),
    'token_2_p_b' :   Decimal('2725.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2770.000000000000000'),
    'token_2_p_b' :   Decimal('2730.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2765.000000000000000'),
    'token_2_p_b' :   Decimal('2735.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2760.000000000000000'),
    'token_2_p_b' :   Decimal('2740.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2755.000000000000000'),
    'token_2_p_b' :   Decimal('2745.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
}


# %%
## Equal positions with stacked liquidity in one position

input_dictionary_3 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('9991.00000000000000'),
    },
}


# %%
## Sliding window with stacked liquidity in one position

input_dictionary_4 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2790.000000000000000'),
    'token_2_p_b' :   Decimal('2690.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2780.000000000000000'),
    'token_2_p_b' :   Decimal('2680.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2770.000000000000000'),
    'token_2_p_b' :   Decimal('2670.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2760.000000000000000'),
    'token_2_p_b' :   Decimal('2660.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2750.000000000000000'),
    'token_2_p_b' :   Decimal('2650.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2740.000000000000000'),
    'token_2_p_b' :   Decimal('2640.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2730.000000000000000'),
    'token_2_p_b' :   Decimal('2630.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2720.000000000000000'),
    'token_2_p_b' :   Decimal('2620.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2710.000000000000000'),
    'token_2_p_b' :   Decimal('2610.000000000000000'),
    'token_2_y_int' : Decimal('9991.00000000000000'),
    },
}


# %%
## Nestled position with stacked liquidity in one position

input_dictionary_5 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2795.000000000000000'),
    'token_2_p_b' :   Decimal('2705.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2790.000000000000000'),
    'token_2_p_b' :   Decimal('2710.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2785.000000000000000'),
    'token_2_p_b' :   Decimal('2715.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2780.000000000000000'),
    'token_2_p_b' :   Decimal('2720.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2775.000000000000000'),
    'token_2_p_b' :   Decimal('2725.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2770.000000000000000'),
    'token_2_p_b' :   Decimal('2730.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2765.000000000000000'),
    'token_2_p_b' :   Decimal('2735.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2760.000000000000000'),
    'token_2_p_b' :   Decimal('2740.000000000000000'),
    'token_2_y_int' : Decimal('1.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2755.000000000000000'),
    'token_2_p_b' :   Decimal('2745.000000000000000'),
    'token_2_y_int' : Decimal('9991.00000000000000'),
    },
}


# %%
## Equal starting prices with increasing n

input_dictionary_6 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2700.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2600.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        2 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2500.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        3 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2400.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        4 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2300.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        5 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2200.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        6 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2100.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        7 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2000.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        8 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('1900.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        9 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('1800.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
}


# %%
input_dictionary_7 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2800.000000000000000'),
    'token_2_p_b' :   Decimal('2500.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
        1 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('2600.000000000000000'),
    'token_2_p_b' :   Decimal('2800.000000000000000'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
}

# %%
input_dictionary_8 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('0.0005'),
    'token_2_p_b' :   Decimal('0.000333333333333333'),
    'token_2_y_int' : Decimal('100.00000000000000'),
    },
}

# %%
input_dictionary_9 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('3000'),
    'token_2_p_b' :   Decimal('2000'),
    'token_2_y_int' : Decimal('100.00000000000000'),
    },
}

# %%
input_dictionary_10 = {
        0 : {
    'token_1' : 'eth',
    'token_2' : 'usdc',
    'token_1_p_a' :   Decimal('0.0005000000000000'),
    'token_1_p_b' :   Decimal('0.0004000000000000'),
    'token_1_y_int' : Decimal('10.00000000000000000'),
    'token_2_p_a' :   Decimal('1000'),
    'token_2_p_b' :   Decimal('500'),
    'token_2_y_int' : Decimal('1000.00000000000000'),
    },
}


